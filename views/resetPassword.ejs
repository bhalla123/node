<!DOCTYPE html>
<link rel="icon" href="/assets/images/time-secured.jpg" type="image/x-icon">
<html>
<head>
  <title>Time Secured | Change Password</title>
  <link rel='stylesheet' href='/stylesheets/styles.css' />
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
  <script type="text/javascript"
    src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.17.0/jquery.validate.js"></script>
</head>
<body>
  <div>
    <%= flash ? flash : '' %>
  </div>
  <div class="container bootstrap snippet">
    <div class="row">
      <div class="col-xs-12 col-sm-12 col-md-6 col-md-offset-2" style="margin: 0 auto;
    margin-top: 10%;">
        <% if(hash) { %>
        <div class="panel panel-info">
          <div class="panel-heading">
            <h3 class="panel-title">
              <span class="glyphicon glyphicon-th"></span>
              Change Password
            </h3>
          </div>
          <form action="/api/change-password" method="post" id="reset_password">
            <div class="panel-body">
              <div class="row">
                <div class="col-xs-6 col-sm-6 col-md-6 separator social-login-box"> <br>
                  <img alt="" class="img-thumbnail" src="https://www.bootdey.com/img/Content/avatar/avatar6.png">
                </div>
                <div style="margin-top:80px;" class="col-xs-6 col-sm-6 col-md-6 login-box">
                  <div class="form-group">
                    <div class="input-group">
                      <div class="input-group-addon"><span class="glyphicon glyphicon-lock"></span></div>
                      <input class="form-control" type="password" placeholder="New Password" name="password" required
                        id="web_pwd">
                    </div>
                  </div>
                  <div class="form-group">
                    <div class="input-group">
                      <div class="input-group-addon"><span class="glyphicon glyphicon-log-in"></span></div>
                      <input class="form-control" type="password" placeholder="Confirm Password" name="confirm_password"
                        id="c_pwd" required>
                      <span id="web_password_match" style="color:red;display:none;">Password and Confirm Password not
                        matched </span>
                      <input type="hidden" name="hash" value="<%= hash %>">
                    </div>
                  </div>
                  <button class=" btn-success" style="float:right" type="submit" id="btn">
                    Save</button>
                </div>
              </div>
            </div>
          </form>
        </div>
        <% }else{ %>
        <div class="panel-heading">
          <h3 class="panel-title">
            <span class="glyphicon glyphicon-th"></span>
            Invalid Link to Reset Password
          </h3>
        </div>
        <% } %>
      </div>
    </div>
  </div>
</body>

</html>
<style type="text/css">
  .separator {
    border-right: 1px solid #dfdfe0;
  }
  .icon-btn-save {
    padding-top: 0;
    padding-bottom: 0;
  }
  .input-group {
    margin-bottom: 10px;
  }
  .btn-save-label {
    position: relative;
    left: -12px;
    display: inline-block;
    padding: 6px 12px;
    background: rgba(0, 0, 0, 0.15);
    border-radius: 3px 0 0 3px;
  }
</style>
<script>
  $(document).ready(function () {

    $('#c_pwd').on('keyup', function () {
      $('#web_password_match').hide();
      var value1 = $('#web_pwd').val();
      var value2 = $('#c_pwd').val();
      if (value2 == '') {
        $('#web_password_match').hide();
      }
      else if (value2 == value1) {
        $('#web_password_match').hide();
        $("#btn").attr("disabled", false);
      } else {
        $('#web_password_match').show();
        $("#btn").attr("disabled", true);
      }
    });
    $('#web_pwd').on('keyup', function () {
      $('#c_pwd').val("");
      $('#web_password_match').hide();
      });
    
  });
</script>